---
import Player from "../../components/Player";
import VideoPlayer from "../../components/VideoPlayer.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { channelsList } from "../../lib/channelsList";

export async function getStaticPaths() {
  const channelsName = [...new Set(channelsList.map((channel) => channel.slug))];

  return channelsName.map((channelName) => {
    return {
      params: { channel: channelName },
    };
  });
}

const { channel } = Astro.params;
const activeChannel = channelsList.find((a) => a.slug === channel);
const pageTitle = activeChannel.name;
---

<BaseLayout pageTitle={pageTitle}>
  <VideoPlayer activeChannel={activeChannel} />
  <Player client:load url={activeChannel.source} />
</BaseLayout>
